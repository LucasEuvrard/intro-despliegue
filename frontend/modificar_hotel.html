<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modificar Hotel - Aterrizar</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="navbar">
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <a href="index.html">
                    <img src="img/Logo.png" alt="Logo de Aterrizar" class="logo">
                </a>
            </div>
            <div id="navbarBasicExample" class="navbar-menu">
                <div class="navbar-start">
                    <a href="index.html" class="navbar-item">Inicio</a>
                    <a href="alojamientos.html" class="navbar-item">Alojamientos</a>
                    <a href="reservas.html" class="navbar-item">Reservas</a>
                </div>
            </div>
        </nav>
    </div>

    <div class="content">
        <h2>Modificar Hotel</h2>

        <form id="form-modificar-hotel">
            <div class="field">
                <label class="label">Nombre del Hotel</label>
                <div class="control">
                    <input class="input" type="text" id="nombre-hotel" required>
                </div>
            </div>

            <div class="field">
                <label class="label">Dirección</label>
                <div class="control">
                    <input class="input" type="text" id="direccion-hotel" required>
                </div>
            </div>

            <div class="field">
                <label class="label">Número de Habitaciones</label>
                <div class="control">
                    <input class="input" type="number" id="habitaciones-hotel" required>
                </div>
            </div>

            <div class="field">
                <button class="button is-primary" type="submit">Modificar Hotel</button>
            </div>
        </form>

        <a class="button is-info is-outlined" href="alojamientos.html">Volver</a>
    </div>

    <footer>
        <p>Contacto: <a href="mailto:Aterrizar@gmail.com">Aterrizar@gmail.com</a> | Teléfono: 0800-777-2354</p>
    </footer>

    <script>
        const parametros_url = new URLSearchParams(window.location.search);
        const id = parametros_url.get('id');

        // Función para cargar los datos del hotel para modificación
        fetch(`http://localhost:3000/api/v1/hoteles/${id}`)
        .then(response => response.json())
        .then(hotel => {
            document.getElementById('nombre-hotel').value = hotel.nombre;
            document.getElementById('direccion-hotel').value = hotel.direccion;
            document.getElementById('habitaciones-hotel').value = hotel.habitaciones;
        });

        // Función para modificar el hotel
        document.getElementById('form-modificar-hotel').addEventListener('submit', (event) => {
            event.preventDefault();

            const nombre = document.getElementById('nombre-hotel').value;
            const direccion = document.getElementById('direccion-hotel').value;
            const habitaciones = document.getElementById('habitaciones-hotel').value;

            const datosModificados = {
                nombre,
                direccion,
                habitaciones
            };

            fetch(`http://localhost:3000/api/v1/hoteles/${id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(datosModificados)
            })
            .then(response => response.json())
            .then(data => {
                alert('Hotel modificado exitosamente');
                window.location.href = `info_hotel.html?id=${data.id}`;
            })
            .catch(error => {
                console.error('Error al modificar el hotel:', error);
                alert('Hubo un error al modificar el hotel. Intenta nuevamente.');
            });
        });
    </script>

</body>
</html>

